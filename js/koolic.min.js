function KoolicElement(a){var b=[];this.el=a,this.parent=function(){return $$(this.el.parentNode)},this.validate=function(a){if(koolic.IsFunction(a))b.push(a);else for(var c=0;c<b.length;c++)b[c]();return!0},koolic._watch.push(this)}function KoolicObject(a){for(var b=a,c=0;c<koolic._objs.length;c++)if(koolic._objs[c].equals(a))return koolic._objs[c];this.equals=function(a){return a instanceof KoolicObject?this===a:b===a};for(var d in a)a.hasOwnProperty(d)&&("object"==typeof a[d]?this[d]=new KoolicObject(a[d]):"string"==typeof a[d]||"number"==typeof a[d]||"boolean"==typeof a[d]?(this[d]=new KoolicProperty(a,d,this),$$._watch.push(this[d])):this[d]=a[d]);koolic._objs.push(this)}function KoolicProperty(a,b,c){var d=b,e=a,f=a[b],g=!1,h=!1,i=!1,j=null,k=[],l=null;j=koolic.objVal(a,b),"undefined"!=typeof c&&(l=c),this.parent=function(){return l},this.isInteger=function(){var a=j;return a===+a&&a===(0|a)},this.isFloat=function(){var a=j;return a===+a&&a!==(0|a)},this.hasChange=function(){return f!=koolic.objVal(e,d)||koolic.objVal(e,d)!=j},this.onChange=function(a){return"undefined"!=typeof a?(k.push(a),!0):k},this.validate=function(){var a=koolic.objVal(e,d);return a!==f?this.value(koolic.objVal(e,d)):a===f&&a!==j&&(koolic.objVal(e,d,j),f=j),!0},this.value=function(a){if("undefined"==typeof a)return j;if(koolic.IsNumber(a)&&!g)g=!0,h=this.isInteger(),h||(i=this.isFloat());else if(g&&!koolic.IsNumber(a)&&null!=a)return!1;if(a!=j){var b=a;h?b=parseInt(a):i&&(b=parseFloat(a)),koolic.objVal(e,d,b),j=b;this.onChange();if(k.length>0)for(var l=0;l<k.length;l++)k[l](f,j);f=b}return!0}}function KoolicFunction(a){var b=a,d=null,e=[],f=[],g=this;for(var h in window)window[h]===a&&(window[h]=function(){var a=g.exec;return a.apply(a,arguments)});this.beforeExec=function(a){"undefined"!=typeof a&&koolic.IsFunction(a)&&e.push(a)},this.afterExec=function(a){"undefined"!=typeof a&&koolic.IsFunction(a)&&e.push(a)},this.exec=function(){for(var a=[],c=0;c<arguments.length;c++)arguments[c]instanceof KoolicProperty?a.push(arguments[c].value()):a.push(arguments[c]);if(e.length>0)for(var c=0;c<e.length;c++){var g=e[c];g.apply(g,a)}if(d=b.apply(b,a),f.length>0)for(var c=0;c<f.length;c++){var g=f[c];g.apply(g,a)}return d},this.value=function(){return d}}function KoolicAnimation(a,b,c){var d,e=b>a?b-a:a-b,f=(new Date).getTime(),d=a,g=[],h=[],i=this;this.reset=function(){d=a,f=(new Date).getTime()},this.onChange=function(a){"undefined"!=typeof a&&koolic.IsFunction(a)&&g.push(a)},this.onDone=function(a){"undefined"!=typeof a&&koolic.IsFunction(a)&&h.push(a)},this.value=function(){return d},this.validate=function(){var j=(new Date).getTime();if(j<f+c){var k=j-f,l=k/c;if(b<a)var m=a-e*l;else var m=a+e*l;d=m;for(var n=0;n<g.length;n++)g[n](i,d)}else{d=b;for(var n=0;n<$$._watch.length;n++)if($$._watch[n]===i){$$._watch.splice(n,1);break}for(var n=0;n<g.length;n++)g[n](i,d);for(var n=0;n<h.length;n++)h[n](i,d)}}}!function(){window.koolic=function(a){return $$.find(a)},window.koolic.IsPlainObject=function(a){return a instanceof Object&&!(a instanceof Function||"[object Object]"!==a.toString()||"Object"!==a.constructor.name)},window.koolic.IsDOMObject=function(a){return a instanceof EventTarget},window.koolic.IsDOMElement=function(a){return a instanceof Node},window.koolic.IsListObject=function(a){return a instanceof Array||a instanceof NodeList},window.koolic.IsFunction=function(a){var b={};return"undefined"!=typeof a&&a&&"[object Function]"===b.toString.call(a)},window.koolic.IsNumber=function(a){return/^-?[\d.]+(?:e-?\d+)?$/.test(a)},window.koolic.IsString=function(a){return"string"==typeof o||"object"==typeof o&&o.constructor===String},window.koolic._objs=[],window.koolic._watch=[],window.koolic._frameTimer=function(){for(var a=0;a<koolic._watch.length;a++)koolic._watch[a].hasOwnProperty("validate")&&koolic._watch[a].validate();setTimeout(koolic._frameTimer,10)},setTimeout(koolic._frameTimer,10),"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),window.koolic.objVal=function(a,b,c){var d=b.split(".");if(d.length>1){for(var e="",f=1;f<d.length;f++)e+=d[f]+(f<d.length-1?".":"");return window.koolic.objVal(a[d[0]],e,c)}return"undefined"!=typeof c?(a[d[0]]=c,!0):a[d[0]]},window.$$=window.koolic}(),function(a){function e(){if(!c){c=!0;for(var a=0;a<b.length;a++)b[a].fn.call(window,b[a].ctx);b=[]}}a.find=function(a){if(null!=a){if("string"==typeof a&&a.length>0){var b=document.querySelectorAll(a);if(1==b.length)return new KoolicElement(b[0]);for(var c=[],d=0;d<b.length;d++)c.push(new KoolicElement(b[d]));return c}if($$.IsDOMElement(a))return new KoolicElement(a);if($$.IsPlainObject(a))return new KoolicObject(a);if($$.IsFunction(a))return new KoolicFunction(a)}};var b=[],c=!1,d=!1;a.ready=function(a,f){return c?void setTimeout(function(){a(f)},1):(b.push({fn:a,ctx:f}),void("complete"===document.readyState?setTimeout(e,1):d||(document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()}),window.attachEvent("onload",e)),d=!0)))}}(window.koolic),function(a){window.KoolicBinding=function(a,b,c){return this.bindable={},this.target={},this.targetProperty="",this.bindable=a,this.target=b,this.targetProperty=c,a instanceof KoolicBindableObject?this:null},KoolicProperty.prototype.bind=function(b,c){function e(a){for(var c=0;c<d.bindings.length;c++)if(d.bindings[c]==a)return!0;return!1}var d=this;return a.IsPlainObject(b)&&2==arguments.length?this.bind($$(b)[c]):("undefined"==typeof this.bindings&&(this.bindings=[]),b instanceof KoolicProperty&&!e(b)&&(this.value(b.value()),b.onChange(function(a,b){d.value(b)}),this.bindings.push(b),b.bind(this),this))},KoolicElement.prototype.bindOnCommit=!1,KoolicElement.prototype.bind=function(b,c,d,e,f){var g=this;if(a.IsPlainObject(b)&&(3==arguments.length||5==arguments.length))return this.bind($$(b)[c],d,arguments[3],arguments[4]);if(!(b instanceof KoolicProperty))return!1;var h="",i="";5==arguments.length?(h=arguments[3]?arguments[3]:"",i=arguments[4]?arguments[4]:""):4==arguments.length&&(h=arguments[2]?arguments[2]:"",i=arguments[3]?arguments[3]:"");var j="innerText";this.el instanceof HTMLInputElement||this.el instanceof HTMLSelectElement?j="value":this.el instanceof HTMLElement&&(j="innerHTML");var k="undefined"==typeof c?j:c;switch(k){case"left":k="style.left",i="px";break;case"top":k="style.top",i="px";break;case"right":k="style.right",i="px";break;case"bottom":k="style.bottom",i="px"}null!=b.value()?a.objVal(this.el,k,h+b.value()+i):b.value(a.objVal(this.el,k));var l=a.objVal(this.el,k.replace(i,"").replace(h,""));return this.validate(function(){var c=a.objVal(g.el,k).replace(i,"").replace(h,"");l!=c&&b.value(c)}),b.onChange(function(b,c){a.objVal(g.el,k,h+c+i),l=c}),!0},KoolicFunction.prototype.bind=function(){for(var a=this,b=0;b<arguments.length;b++){var c=arguments[b];if(!(c instanceof KoolicProperty))return!1}for(var d=arguments,b=0;b<arguments.length;b++){var c=arguments[b];c instanceof KoolicProperty&&c.onChange(function(b,c){var e=a.exec;e.apply(e,d)})}return!0}}(koolic),function(a){KoolicProperty.prototype.animate=function(a,b,c){if(this.isInteger()||this.isFloat()){var d=this;if(1==arguments.length&&arguments[0]instanceof KoolicAnimation)return arguments[0].reset(),$$._watch.push(arguments[0]),e;var e=new KoolicAnimation(a,b,c);return e.onChange(function(a,b){d.value(b)}),$$._watch.push(e),e}return!1}}(koolic),function(a){KoolicElement.prototype.hide=function(){return this._originalDisplay=element.style.display,element.style.display="none",!0},KoolicElement.prototype.show=function(){return element.style.display="undefined"==typeof _originalDisplay||"none"==_originalDisplay?"inline-block":_originalDisplay,!0},KoolicElement.prototype.text=function(a){return"undefined"==typeof a?this.el.innerText:void(this.el.innerText=a)},KoolicElement.prototype.html=function(a){return"undefined"==typeof a?this.el.innerHTML:void(this.el.innerHTML=a)}}(koolic);